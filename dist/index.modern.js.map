{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\n\nconst pageStates = {\n  LOADING: 'LOADING',\n  ERROR: 'ERROR',\n  COMPLETED: 'COMPLETED'\n};\n\nconst InitialPageLoader = ({\n  callApiOnMount,\n  api,\n  successCondition,\n  children\n}) => {\n  const [pageState, setPageState] = useState('');\n  const [data, setData] = useState(null);\n\n  const callApi = async () => {\n    setPageState(pageStates.LOADING);\n    try {\n      const data = await api();\n      setData(data);\n\n      if (successCondition(data)) setPageState(pageStates.COMPLETED)\n      else setPageState(pageStates.ERROR)\n    } catch (error) {\n      setPageState(pageStates.ERROR)\n    }\n  };\n\n\n  if (callApiOnMount) useEffect(callApi, [api]);\n\n  return (\n    <Fragment>\n      { pageState == pageStates.LOADING && <div>Loading</div> }\n      { pageState == pageStates.COMPLETED && children(data) }\n      { pageState == pageStates.ERROR && <div></div> }\n    </Fragment>\n  )\n}\n\n\nInitialPageLoader.defaultProps = {\n  callApiOnMount: true,\n};\n\nInitialPageLoader.propTypes = {\n  children: PropTypes.any.isRequired, //(Mandetory) the children to show after the api call\n  api: PropTypes.func.isRequired, //(Mandetory) the promise in which the api call is being made\n  callApiOnMount: PropTypes.bool, //(Optional) Don't automatically want to call the api on mount, instead\n  successCondition: PropTypes.func,\n};\n\nexport default InitialPageLoader;"],"names":["pageStates","LOADING","ERROR","COMPLETED","InitialPageLoader","callApiOnMount","api","successCondition","children","pageState","setPageState","useState","data","setData","callApi","error","useEffect","defaultProps","propTypes","PropTypes","any","isRequired","func","bool"],"mappings":";;AAEA,MAAMA,UAAU,GAAG;AACjBC,EAAAA,OAAO,EAAE,SADQ;AAEjBC,EAAAA,KAAK,EAAE,OAFU;AAGjBC,EAAAA,SAAS,EAAE;AAHM,CAAnB;;AAMA,MAAMC,iBAAiB,GAAG,CAAC;AACzBC,EAAAA,cADyB;AAEzBC,EAAAA,GAFyB;AAGzBC,EAAAA,gBAHyB;AAIzBC,EAAAA;AAJyB,CAAD,KAKpB;AACJ,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BC,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBF,QAAQ,CAAC,IAAD,CAAhC;;AAEA,QAAMG,OAAO,GAAG,YAAY;AAC1BJ,IAAAA,YAAY,CAACV,UAAU,CAACC,OAAZ,CAAZ;;AACA,QAAI;AACF,YAAMW,IAAI,GAAG,MAAMN,GAAG,EAAtB;AACAO,MAAAA,OAAO,CAACD,IAAD,CAAP;AAEA,UAAIL,gBAAgB,CAACK,IAAD,CAApB,EAA4BF,YAAY,CAACV,UAAU,CAACG,SAAZ,CAAZ,CAA5B,KACKO,YAAY,CAACV,UAAU,CAACE,KAAZ,CAAZ;AACN,KAND,CAME,OAAOa,KAAP,EAAc;AACdL,MAAAA,YAAY,CAACV,UAAU,CAACE,KAAZ,CAAZ;AACD;AACF,GAXD;;AAcA,MAAIG,cAAJ,EAAoBW,SAAS,CAACF,OAAD,EAAU,CAACR,GAAD,CAAV,CAAT;AAEpB,sBACE,oBAAC,QAAD,QACIG,SAAS,IAAIT,UAAU,CAACC,OAAxB,iBAAmC,2CADvC,EAEIQ,SAAS,IAAIT,UAAU,CAACG,SAAxB,IAAqCK,QAAQ,CAACI,IAAD,CAFjD,EAGIH,SAAS,IAAIT,UAAU,CAACE,KAAxB,iBAAiC,gCAHrC,CADF;AAOD,CAhCD;;AAmCAE,iBAAiB,CAACa,YAAlB,GAAiC;AAC/BZ,EAAAA,cAAc,EAAE;AADe,CAAjC;AAIAD,iBAAiB,CAACc,SAAlB,GAA8B;AAC5BV,EAAAA,QAAQ,EAAEW,SAAS,CAACC,GAAV,CAAcC,UADI;AAE5Bf,EAAAA,GAAG,EAAEa,SAAS,CAACG,IAAV,CAAeD,UAFQ;AAG5BhB,EAAAA,cAAc,EAAEc,SAAS,CAACI,IAHE;AAI5BhB,EAAAA,gBAAgB,EAAEY,SAAS,CAACG;AAJA,CAA9B;;;;"}